{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Eric\\\\Desktop\\\\powerApp\\\\client\\\\src\\\\components\\\\Programs\\\\CreateProgram.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { DragDropContext } from \"react-beautiful-dnd\"; // import { Button, Col } from \"react-bootstrap\";\n\nimport Column from \"./ProgramBoard/Column\";\nimport { API_URL } from \"../../constants\";\nimport ProgramForm from \"./ProgramForm\";\nimport { StyledContainer } from \"../../styles\";\nexport default class CreateProgram extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      const {\n        id,\n        value\n      } = e.target;\n      this.setState({\n        [id]: value\n      });\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const {\n        programNumber,\n        programName,\n        columns\n      } = this.state;\n      axios.post(`${API_URL}/programs/add`, {\n        programNumber,\n        programName,\n        programInfo: columns[\"column-2\"].items\n      }).then(res => {\n        this.setState(prev => {\n          return { ...prev,\n            programNumber: \"\",\n            programName: \"\",\n            columns: {\n              \"column-1\": {\n                name: \"Track List\",\n                items: prev.tracks\n              },\n              \"column-2\": {\n                name: \"Program List\",\n                items: []\n              }\n            }\n          };\n        });\n      });\n    };\n\n    this.state = {\n      programNumber: \"\",\n      programName: \"\",\n      tracks: [],\n      columns: {\n        \"column-1\": {\n          name: \"Track List\",\n          items: []\n        },\n        \"column-2\": {\n          name: \"Program List\",\n          items: []\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`${API_URL}/tracks/`).then(response => {\n      this.setState(prev => {\n        const copy = { ...prev\n        };\n        const {\n          columns\n        } = copy;\n        copy.tracks = response.data;\n        columns[\"column-1\"].items = [...copy.columns[\"column-1\"].items, ...response.data];\n        return copy;\n      });\n    });\n  }\n\n  render() {\n    const {\n      columns\n    } = this.state;\n    return React.createElement(StyledContainer, {\n      fluid: true,\n      title: \"Create Program\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(ProgramForm, Object.assign({}, this.state, {\n      buttonText: \"Create\",\n      onChange: this.onChange,\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    })), React.createElement(DragDropContext, {\n      onDragEnd: ({\n        source,\n        destination\n      }) => {\n        if (!destination) {\n          return;\n        }\n\n        if (source.droppableId !== destination.droppableId) {\n          this.setState(prev => {\n            const sourceColumn = prev.columns[source.droppableId];\n            const destColumn = prev.columns[destination.droppableId];\n            const sourceItems = [...sourceColumn.items];\n            const destItems = [...destColumn.items];\n            const [removed] = sourceItems.splice(source.index, 1);\n            destItems.splice(destination.index, 0, removed);\n            return { ...prev,\n              columns: { ...prev.columns,\n                [source.droppableId]: { ...sourceColumn,\n                  items: sourceItems\n                },\n                [destination.droppableId]: { ...destColumn,\n                  items: destItems\n                }\n              }\n            };\n          });\n        } else {\n          this.setState(prev => {\n            const column = prev.columns[source.droppableId];\n            const copiedItems = [...column.items];\n            const [removed] = copiedItems.splice(source.index, 1);\n            copiedItems.splice(destination.index, 0, removed);\n            return { ...prev,\n              columns: { ...prev.columns,\n                [source.droppableId]: { ...column,\n                  items: copiedItems\n                }\n              }\n            };\n          });\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, Object.entries(columns).map(([id, column]) => {\n      return React.createElement(Column, Object.assign({ ...column,\n        id,\n        key: id\n      }, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }));\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Eric/Desktop/powerApp/client/src/components/Programs/CreateProgram.js"],"names":["React","Component","axios","DragDropContext","Column","API_URL","ProgramForm","StyledContainer","CreateProgram","constructor","props","onChange","e","id","value","target","setState","onSubmit","preventDefault","programNumber","programName","columns","state","post","programInfo","items","then","res","prev","name","tracks","componentDidMount","get","response","copy","data","render","source","destination","droppableId","sourceColumn","destColumn","sourceItems","destItems","removed","splice","index","column","copiedItems","Object","entries","map","key"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,qBAAhC,C,CACA;;AACA,OAAOC,MAAP,MAAmB,uBAAnB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,eAAT,QAAgC,cAAhC;AAEA,eAAe,MAAMC,aAAN,SAA4BP,SAA5B,CAAsC;AACnDQ,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAqCnBC,QArCmB,GAqCRC,CAAC,IAAI;AACd,YAAM;AAAEC,QAAAA,EAAF;AAAMC,QAAAA;AAAN,UAAgBF,CAAC,CAACG,MAAxB;AACA,WAAKC,QAAL,CAAc;AACZ,SAACH,EAAD,GAAMC;AADM,OAAd;AAGD,KA1CkB;;AAAA,SA4CnBG,QA5CmB,GA4CRL,CAAC,IAAI;AACdA,MAAAA,CAAC,CAACM,cAAF;AACA,YAAM;AAAEC,QAAAA,aAAF;AAAiBC,QAAAA,WAAjB;AAA8BC,QAAAA;AAA9B,UAA0C,KAAKC,KAArD;AACApB,MAAAA,KAAK,CACFqB,IADH,CACS,GAAElB,OAAQ,eADnB,EACmC;AAC/Bc,QAAAA,aAD+B;AAE/BC,QAAAA,WAF+B;AAG/BI,QAAAA,WAAW,EAAEH,OAAO,CAAC,UAAD,CAAP,CAAoBI;AAHF,OADnC,EAMGC,IANH,CAMQC,GAAG,IAAI;AACX,aAAKX,QAAL,CAAcY,IAAI,IAAI;AACpB,iBAAO,EACL,GAAGA,IADE;AAELT,YAAAA,aAAa,EAAE,EAFV;AAGLC,YAAAA,WAAW,EAAE,EAHR;AAILC,YAAAA,OAAO,EAAE;AACP,0BAAY;AACVQ,gBAAAA,IAAI,EAAE,YADI;AAEVJ,gBAAAA,KAAK,EAAEG,IAAI,CAACE;AAFF,eADL;AAKP,0BAAY;AACVD,gBAAAA,IAAI,EAAE,cADI;AAEVJ,gBAAAA,KAAK,EAAE;AAFG;AALL;AAJJ,WAAP;AAeD,SAhBD;AAiBD,OAxBH;AAyBD,KAxEkB;;AAGjB,SAAKH,KAAL,GAAa;AACXH,MAAAA,aAAa,EAAE,EADJ;AAEXC,MAAAA,WAAW,EAAE,EAFF;AAGXU,MAAAA,MAAM,EAAE,EAHG;AAIXT,MAAAA,OAAO,EAAE;AACP,oBAAY;AACVQ,UAAAA,IAAI,EAAE,YADI;AAEVJ,UAAAA,KAAK,EAAE;AAFG,SADL;AAKP,oBAAY;AACVI,UAAAA,IAAI,EAAE,cADI;AAEVJ,UAAAA,KAAK,EAAE;AAFG;AALL;AAJE,KAAb;AAeD;;AAEDM,EAAAA,iBAAiB,GAAG;AAClB7B,IAAAA,KAAK,CAAC8B,GAAN,CAAW,GAAE3B,OAAQ,UAArB,EAAgCqB,IAAhC,CAAqCO,QAAQ,IAAI;AAC/C,WAAKjB,QAAL,CAAcY,IAAI,IAAI;AACpB,cAAMM,IAAI,GAAG,EAAE,GAAGN;AAAL,SAAb;AACA,cAAM;AAAEP,UAAAA;AAAF,YAAca,IAApB;AACAA,QAAAA,IAAI,CAACJ,MAAL,GAAcG,QAAQ,CAACE,IAAvB;AAEAd,QAAAA,OAAO,CAAC,UAAD,CAAP,CAAoBI,KAApB,GAA4B,CAC1B,GAAGS,IAAI,CAACb,OAAL,CAAa,UAAb,EAAyBI,KADF,EAE1B,GAAGQ,QAAQ,CAACE,IAFc,CAA5B;AAKA,eAAOD,IAAP;AACD,OAXD;AAYD,KAbD;AAcD;;AAuCDE,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEf,MAAAA;AAAF,QAAc,KAAKC,KAAzB;AACA,WACE,oBAAC,eAAD;AAAiB,MAAA,KAAK,MAAtB;AAAuB,MAAA,KAAK,EAAC,gBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD,oBACM,KAAKA,KADX;AAEE,MAAA,UAAU,EAAC,QAFb;AAGE,MAAA,QAAQ,EAAE,KAAKX,QAHjB;AAIE,MAAA,QAAQ,EAAE,KAAKM,QAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADF,EAOE,oBAAC,eAAD;AACE,MAAA,SAAS,EAAE,CAAC;AAAEoB,QAAAA,MAAF;AAAUC,QAAAA;AAAV,OAAD,KAA6B;AACtC,YAAI,CAACA,WAAL,EAAkB;AAChB;AACD;;AAED,YAAID,MAAM,CAACE,WAAP,KAAuBD,WAAW,CAACC,WAAvC,EAAoD;AAClD,eAAKvB,QAAL,CAAcY,IAAI,IAAI;AACpB,kBAAMY,YAAY,GAAGZ,IAAI,CAACP,OAAL,CAAagB,MAAM,CAACE,WAApB,CAArB;AACA,kBAAME,UAAU,GAAGb,IAAI,CAACP,OAAL,CAAaiB,WAAW,CAACC,WAAzB,CAAnB;AACA,kBAAMG,WAAW,GAAG,CAAC,GAAGF,YAAY,CAACf,KAAjB,CAApB;AACA,kBAAMkB,SAAS,GAAG,CAAC,GAAGF,UAAU,CAAChB,KAAf,CAAlB;AACA,kBAAM,CAACmB,OAAD,IAAYF,WAAW,CAACG,MAAZ,CAAmBR,MAAM,CAACS,KAA1B,EAAiC,CAAjC,CAAlB;AACAH,YAAAA,SAAS,CAACE,MAAV,CAAiBP,WAAW,CAACQ,KAA7B,EAAoC,CAApC,EAAuCF,OAAvC;AACA,mBAAO,EACL,GAAGhB,IADE;AAELP,cAAAA,OAAO,EAAE,EACP,GAAGO,IAAI,CAACP,OADD;AAEP,iBAACgB,MAAM,CAACE,WAAR,GAAsB,EACpB,GAAGC,YADiB;AAEpBf,kBAAAA,KAAK,EAAEiB;AAFa,iBAFf;AAMP,iBAACJ,WAAW,CAACC,WAAb,GAA2B,EACzB,GAAGE,UADsB;AAEzBhB,kBAAAA,KAAK,EAAEkB;AAFkB;AANpB;AAFJ,aAAP;AAcD,WArBD;AAsBD,SAvBD,MAuBO;AACL,eAAK3B,QAAL,CAAcY,IAAI,IAAI;AACpB,kBAAMmB,MAAM,GAAGnB,IAAI,CAACP,OAAL,CAAagB,MAAM,CAACE,WAApB,CAAf;AACA,kBAAMS,WAAW,GAAG,CAAC,GAAGD,MAAM,CAACtB,KAAX,CAApB;AACA,kBAAM,CAACmB,OAAD,IAAYI,WAAW,CAACH,MAAZ,CAAmBR,MAAM,CAACS,KAA1B,EAAiC,CAAjC,CAAlB;AACAE,YAAAA,WAAW,CAACH,MAAZ,CAAmBP,WAAW,CAACQ,KAA/B,EAAsC,CAAtC,EAAyCF,OAAzC;AACA,mBAAO,EACL,GAAGhB,IADE;AAELP,cAAAA,OAAO,EAAE,EACP,GAAGO,IAAI,CAACP,OADD;AAEP,iBAACgB,MAAM,CAACE,WAAR,GAAsB,EACpB,GAAGQ,MADiB;AAEpBtB,kBAAAA,KAAK,EAAEuB;AAFa;AAFf;AAFJ,aAAP;AAUD,WAfD;AAgBD;AACF,OA/CH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAiDGC,MAAM,CAACC,OAAP,CAAe7B,OAAf,EAAwB8B,GAAxB,CAA4B,CAAC,CAACtC,EAAD,EAAKkC,MAAL,CAAD,KAAkB;AAC7C,aAAO,oBAAC,MAAD,gBAAY,EAAE,GAAGA,MAAL;AAAalC,QAAAA,EAAb;AAAiBuC,QAAAA,GAAG,EAAEvC;AAAtB,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAP;AACD,KAFA,CAjDH,CAPF,CADF;AA+DD;;AA5IkD","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { DragDropContext } from \"react-beautiful-dnd\";\r\n// import { Button, Col } from \"react-bootstrap\";\r\nimport Column from \"./ProgramBoard/Column\";\r\nimport { API_URL } from \"../../constants\";\r\nimport ProgramForm from \"./ProgramForm\";\r\nimport { StyledContainer } from \"../../styles\";\r\n\r\nexport default class CreateProgram extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      programNumber: \"\",\r\n      programName: \"\",\r\n      tracks: [],\r\n      columns: {\r\n        \"column-1\": {\r\n          name: \"Track List\",\r\n          items: [],\r\n        },\r\n        \"column-2\": {\r\n          name: \"Program List\",\r\n          items: [],\r\n        },\r\n      },\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(`${API_URL}/tracks/`).then(response => {\r\n      this.setState(prev => {\r\n        const copy = { ...prev };\r\n        const { columns } = copy;\r\n        copy.tracks = response.data;\r\n\r\n        columns[\"column-1\"].items = [\r\n          ...copy.columns[\"column-1\"].items,\r\n          ...response.data,\r\n        ];\r\n\r\n        return copy;\r\n      });\r\n    });\r\n  }\r\n\r\n  onChange = e => {\r\n    const { id, value } = e.target;\r\n    this.setState({\r\n      [id]: value,\r\n    });\r\n  };\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    const { programNumber, programName, columns } = this.state;\r\n    axios\r\n      .post(`${API_URL}/programs/add`, {\r\n        programNumber,\r\n        programName,\r\n        programInfo: columns[\"column-2\"].items,\r\n      })\r\n      .then(res => {\r\n        this.setState(prev => {\r\n          return {\r\n            ...prev,\r\n            programNumber: \"\",\r\n            programName: \"\",\r\n            columns: {\r\n              \"column-1\": {\r\n                name: \"Track List\",\r\n                items: prev.tracks,\r\n              },\r\n              \"column-2\": {\r\n                name: \"Program List\",\r\n                items: [],\r\n              },\r\n            },\r\n          };\r\n        });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const { columns } = this.state;\r\n    return (\r\n      <StyledContainer fluid title=\"Create Program\">\r\n        <ProgramForm\r\n          {...this.state}\r\n          buttonText=\"Create\"\r\n          onChange={this.onChange}\r\n          onSubmit={this.onSubmit}\r\n        />\r\n        <DragDropContext\r\n          onDragEnd={({ source, destination }) => {\r\n            if (!destination) {\r\n              return;\r\n            }\r\n\r\n            if (source.droppableId !== destination.droppableId) {\r\n              this.setState(prev => {\r\n                const sourceColumn = prev.columns[source.droppableId];\r\n                const destColumn = prev.columns[destination.droppableId];\r\n                const sourceItems = [...sourceColumn.items];\r\n                const destItems = [...destColumn.items];\r\n                const [removed] = sourceItems.splice(source.index, 1);\r\n                destItems.splice(destination.index, 0, removed);\r\n                return {\r\n                  ...prev,\r\n                  columns: {\r\n                    ...prev.columns,\r\n                    [source.droppableId]: {\r\n                      ...sourceColumn,\r\n                      items: sourceItems,\r\n                    },\r\n                    [destination.droppableId]: {\r\n                      ...destColumn,\r\n                      items: destItems,\r\n                    },\r\n                  },\r\n                };\r\n              });\r\n            } else {\r\n              this.setState(prev => {\r\n                const column = prev.columns[source.droppableId];\r\n                const copiedItems = [...column.items];\r\n                const [removed] = copiedItems.splice(source.index, 1);\r\n                copiedItems.splice(destination.index, 0, removed);\r\n                return {\r\n                  ...prev,\r\n                  columns: {\r\n                    ...prev.columns,\r\n                    [source.droppableId]: {\r\n                      ...column,\r\n                      items: copiedItems,\r\n                    },\r\n                  },\r\n                };\r\n              });\r\n            }\r\n          }}\r\n        >\r\n          {Object.entries(columns).map(([id, column]) => {\r\n            return <Column {...{ ...column, id, key: id }} />;\r\n          })}\r\n        </DragDropContext>\r\n      </StyledContainer>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}